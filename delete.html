<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Frecno DELETE Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
  
    label {
      display: block;
      margin-bottom: 6px;
      font-weight: bold;
    }
  
    button {
      padding: 10px 20px;
      margin-right: 10px;
      margin-top: 10px;
    }
  
    pre {
      background-color: #d1a6a6;
      padding: 20px;
      margin: 10px 0;
      white-space: pre-wrap;
      word-wrap: break-word;
      font-family: monospace;
    }
  
    #deleteRecnos {
      width: 100%;
      height: 150px;
      padding: 10px;
      margin: 15px 0;
      font-family: monospace;
      background-color: #fff8dc;
      border: 2px solid #d1a6a6;
      border-radius: 6px;
      font-size: 14px;
      resize: vertical;
    }
  </style>  
</head>
<body>

<h2>DELETE Frecno Generator</h2>

<label for="deleteRecnos">ari e input frecno na imo ipabilin aron di madelete (one per line; e by column pag butang sa frecno dong):</label>
<textarea id="deleteRecnos" placeholder="e.g.&#10;122086&#10;122088"></textarea>

<button onclick="generateDeleteSQL()">Generate DELETE SQL script</script></button>
<button onclick="clearDeleteForm()">Clear</button>

<h3>Generated SQL DELETE Script:</h3>
<button onclick="copyToClipboard()">Copy to Clipboard</button>
<pre id="deleteOutput"></pre>

<script>
  function generateDeleteSQL() {
    const raw = document.getElementById("deleteRecnos").value.trim();
    if (!raw) {
      alert("Please input frecno values first.");
      return;
    }

    const lines = raw
      .split(/\r?\n/)
      .map(line => line.trim())
      .filter(val => val !== '')
      .map(val => `"${val}"`);

    const grouped = [];
    for (let i = 0; i < lines.length; i += 8) {
      grouped.push(lines.slice(i, i + 8).join(", "));
    }

    const formatted = grouped.join(",\n    ");

    const sql = 
`DELETE FROM pos_sale 
WHERE frecno NOT IN (
    ${formatted}
);

DELETE FROM pos_sale_payment 
WHERE frecno NOT IN (
    ${formatted}
);

DELETE FROM pos_sale_product 
WHERE frecno NOT IN (
    ${formatted}
);`;

    document.getElementById("deleteOutput").textContent = sql;
  }

  function clearDeleteForm() {
    document.getElementById("deleteRecnos").value = '';
    document.getElementById("deleteOutput").textContent = '';
  }

  function copyToClipboard() {
    const output = document.getElementById("deleteOutput").textContent;
    if (!output) {
      alert("Nothing to copy yet! Aysig kiat ug nawng ara");
      return;
    }
    navigator.clipboard.writeText(output).then(() => {
      alert("Copied to clipboard! Trabaho tarong tapolan");
    });
  }
</script>

</body>
</html>
